(function(f){function j(c,a){var d=document.createElementNS("http://www.w3.org/2000/svg",c||"svg");a&&f.each(a,function(b,e){d.setAttributeNS(null,b,e)});return f(d)}f.fn.activity=function(c){this.each(function(){var a=f(this),d=a.data("activity");if(d){clearInterval(d.data("interval"));d.remove();a.removeData("activity")}if(c!==false){c=f.extend({color:a.css("color")},f.fn.activity.defaults,c);d=m(a,c).css("position","absolute").prependTo(c.outside?"body":a);var b=a.outerHeight()-d.height(),e=a.outerWidth()-
d.width();b={top:c.valign=="top"?c.padding:c.valign=="bottom"?b-c.padding:Math.floor(b/2),left:c.align=="left"?c.padding:c.align=="right"?e-c.padding:Math.floor(e/2)};e=a.offset();if(c.outside)d.css({top:e.top+"px",left:e.left+"px"});else{b.top-=d.offset().top-e.top;b.left-=d.offset().left-e.left}d.css({marginTop:b.top+"px",marginLeft:b.left+"px"});k(d,c.segments,Math.round(10/c.speed)/10);a.data("activity",d)}});return this};f.fn.activity.defaults={segments:12,space:3,length:7,width:4,speed:1.2,
align:"center",valign:"center",padding:4};f.fn.activity.getOpacity=function(c,a){var d=c.steps||c.segments-1;return 1-Math.min(a,d)*(1-(c.opacity!==undefined?c.opacity:1/d))/d};var m=function(){return f("<div>").addClass("busy")},k=function(){};if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect){m=function(c,a){for(var d=a.width*2+a.space,b=d+a.length+Math.ceil(a.width/2)+1,e=j().width(b*2).height(b*2),g=j("g",{"stroke-width":a.width,"stroke-linecap":"round",
stroke:a.color}).appendTo(j("g",{transform:"translate("+b+","+b+")"}).appendTo(e)),h=0;h<a.segments;h++)g.append(j("line",{x1:0,y1:d,x2:0,y2:d+a.length,transform:"rotate("+360/a.segments*h+", 0, 0)",opacity:f.fn.activity.getOpacity(a,h)}));return f("<div>").append(e).width(2*b).height(2*b)};if(document.createElement("div").style.WebkitAnimationName!==undefined){var n={};k=function(c,a,d){if(!n[a]){for(var b="spin"+a,e="@-webkit-keyframes "+b+" {",g=0;g<a;g++){var h="% { -webkit-transform:rotate("+
Math.round(360/a*g)+"deg); }\n";e+=Math.round(1E5/a*g)/1E3+h+Math.round(1E5/a*(g+1)-1)/1E3+h}e+="100% { -webkit-transform:rotate(100deg); }\n}";document.styleSheets[0].insertRule(e);n[a]=b}c.css("-webkit-animation",n[a]+" "+d+"s linear infinite")}}else k=function(c,a,d){var b=0,e=c.find("g g").get(0);c.data("interval",setInterval(function(){e.setAttributeNS(null,"transform","rotate("+ ++b%a*(360/a)+")")},d*1E3/a))}}else{var l=document.createElement("div");l.innerHTML="<v:shape />";var i=l.firstChild;
i.style.behavior="url(#default#VML)";i=i?typeof i.adj=="object":true;l.parentNode.removeChild(l);if(i){var o=document.createStyleSheet();f.each(["group","shape","stroke"],function(){o.addRule(this,"behavior:url(#default#VML);")});m=function(c,a){var d=a.width*2+a.space,b=(d+a.length+Math.ceil(a.width/2)+1)*2,e=-Math.ceil(b/2);e=f("<group>",{coordsize:b+" "+b,coordorigin:e+" "+e}).css({top:e,left:e,width:b,height:b});for(var g=0;g<a.segments;g++)e.append(f("<shape>",{path:"m "+d+",0  l "+(d+a.length)+
",0"}).css({width:b,height:b,rotation:360/a.segments*g+"deg"}).append(f("<stroke>",{color:a.color,weight:a.width+"px",endcap:"round",opacity:f.fn.activity.getOpacity(a,g)})));return f("<group>",{coordsize:b+" "+b}).css({width:b,height:b,overflow:"hidden"}).append(e)};k=function(c,a,d){var b=0,e=c.get(0);c.data("interval",setInterval(function(){e.style.rotation=++b%a*(360/a)},d*1E3/a))}}}})(jQuery);